	TAPE GOBBLER	PALX 235	11/24/76  08:54:37	PAGE 1
	RJL;CASPUN 5	PAGE 1 	

					.TITLE TAPE GOBBLER
					
					.INSRT SITS;SITMAC >
	TAPE GOBBLER	PALX 235	11/24/76  08:54:37	PAGE 2
	SITS;SITMAC 6	PAGE 1 	

		000000			A=%0
		000001			B=%1
		000002			C=%2
		000003			D=%3
		000004			E=%4
		000005			F=%5
		000006			P=%6
		000007			PC=%7
					
					.XCREF A,B,C,D,E,F,P,PC
					
					.MACRO SAVE THINGS
						.IRP  X,<THINGS>
							.IFB X
								TST -(P)
							.IFF
								.IF IDN X,#0
									CLR -(P)
								.IFF
									MOV X,-(P)
								.ENDC
							.ENDC
						.ENDM
					.ENDM
					
					.MACRO REST THINGS
						.IRP X,<THINGS>
							.IF B X
								TST (P)+
							.IFF
								MOV (P)+,X
							.ENDC
						.ENDM
					.ENDM
					
					.MACRO WORDS WORDS
						.IRP X,<WORDS>
							X
						.ENDM
					.ENDM
					
					.MACRO BYTES BYTES
						.IRP X,<BYTES>
							.BYTE X
						.ENDM
					.ENDM
					.MACRO ASCII TEXT
						.ASCII ÔEXTŠ					.ENDM
					.MACRO ASCIZ TEXT
						.ASCIZ ÔEXTŠ					.ENDM
					
					.MACRO FLASK Q,FLAG
	TAPE GOBBLER	PALX 235	11/24/76  08:54:37	PAGE 3
	SITS;SITMAC 6	PAGE 1.1 	

					.IF1
					.PRINT /Q
					FLAG=/
					.TTYMAC F
					FLAG==F
					.ENDM
					.ENDC
					.ENDM
	TAPE GOBBLER	PALX 235	11/24/76  08:54:37	PAGE 4
	RJL;CASPUN 5	PAGE 1.1 	

		000400			.=400
	000400	000167	000110			JMP START	;TO READ IN A TAPE
	000404	000167	000114			JMP TLOOP	;TO READ NEXT TAPE
	000410	000167	000174			JMP WRITE	;TO BARF ONTO THE CASSETTE
	000414	000167	000120			JMP ETAPE	;TO END A TAPE
		000500			.=500
	000500	000000			PDL:	0
					
	000502	000000			TEND:	0		;CURRENT END OF TAPE BARFER
	000504	177560			PTCSR:	177560
	000506	177562			PTBUF:	177562
	000510	177564			PPCSR:	177564
	000512	177566			PPBUF:	177566
					
	000514	012706	000500		START:	MOV #PDL,P
	000520	012704	000734			MOV #TSTART,E	;E POINTS TO WHERE WE ARE IN THE BUFFER
	000524	004767	000024		TLOOP:	JSR PC,BEGIGN	;IGNORE FIRST N CHARS ON EVERY TAPE
					
	000530	004767	000034		CLOOP:	JSR PC,CGET	;GET A CHAR
	000534	110024				MOVB A,(E)+	;SAVE THE CHAR
	000536	000774				BR CLOOP
					
	000540	162704	000004		ETAPE:	SUB #4,E	;IGNORE LAST 4 CHARS
	000544	010467	177732			MOV E,TEND
	000550	000000				HALT
	000552	000764				BR TLOOP
					
	000554	012701	000004		BEGIGN:	MOV #4,B
	000560	004767	000004		1$:	JSR PC,CGET
	000564	077103				SOB B,1$
	000566	000207				RTS PC
					
	000570	005277	177710		CGET:	INC @PTCSR
	000574	105777	177704		1$:	TSTB @PTCSR
	000600	100375				BPL 1$
	000602	017700	177700			MOV @PTBUF,A
	000606	000207				RTS PC
					
	000610	012706	000500		WRITE:	MOV #PDL,P
	000614	004767	000042			JSR PC,WAITL
	000620	004767	000036			JSR PC,WAITL
					;FIRST TYPE THE MAGIC INCANTATION
	000624	012701	000724			MOV #MAGIC,B
	000630	012702	000733			MOV #MAGICE,C
	000634	004767	000034			JSR PC,TYPE
					;THEN WAIT FOR THE LOAFER TO BE HAPPY
	000640	004767	000016			JSR PC,WAITL
	000644	012701	000734			MOV #TSTART,B
	000650	016702	177626			MOV TEND,C
	000654	004767	000014			JSR PC,TYPE	;NOW BLAST OUT THE REAL THING
	000660	000777				BR .		;LET SOMEONE TURN OFF THE TAPE
					
					
	000662	012700	000024		WAITL:	MOV #20.,A
	TAPE GOBBLER	PALX 235	11/24/76  08:54:37	PAGE 5
	RJL;CASPUN 5	PAGE 1.2 	

	000666	077101			1$:	SOB B,1$	;65K LOOPS = .3 SEC
	000670	077002				SOB A,1$	;SO THIS IS 6 SECONDS
	000672	000207				RTS PC
					
	000674	112100			TYPE:	MOVB (B)+,A
	000676	004767	000006			JSR PC,TYO
	000702	020102				CMP B,C
	000704	103773				BLO TYPE
	000706	000207				RTS PC
					
	000710	105777	177574		TYO:	TSTB @PPCSR
	000714	100375				BPL TYO
	000716	110077	177570			MOVB A,@PPBUF
	000722	000207				RTS PC
					
	000724	   061		
	000725	   067		
	000726	   067		
	000727	   065		
	000730	   066		
	000731	   060		
	000732	   114		
					MAGIC:	.ASCII /177560L/
					MAGICE:
		000734				.EVEN
					
					TSTART:
		000001				.END
	TAPE GOBBLER	PALX 235	11/24/76  08:54:37	PAGE 6
	RJL;CASPUN 5	PAGE 1 	***SYMBOL TABLE***      

	A	000000R	
	B	000001R	
	BEGIGN	000554	
	C	000002R	
	CGET	000570	
	CLOOP	000530	
	D	000003R	
	E	000004R	
	ETAPE	000540	
	F	000005R	
	MAGIC	000724	
	MAGICE	000733	
	P	000006R	
	PC	000007R	
	PDL	000500	
	PPBUF	000512	
	PPCSR	000510	
	PTBUF	000506	
	PTCSR	000504	
	START	000514	
	TEND	000502	
	TLOOP	000524	
	TSTART	000734	
	TYO	000710	
	TYPE	000674	
	WAITL	000662	
	WRITE	000610	

1.6 WDS AVG INSN LENGTH

1 SECONDS RUN-TIME
