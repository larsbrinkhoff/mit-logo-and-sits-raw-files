A=%0
B=%1
C=%2
D=%3
E=%4
F=%5
P=%6
PC=%7

DPC=172000
DSR=172002
LKS=177546

.=0
	.REPT 100
	.+2
	HALT
	.ENDR

.=100
	LKBRK
	340
	LKBRK
	340

PS=177776

.=500
PDL:	0

DISLST:	117620
	100
	100
	100000
	.ASCII /LEBEL: /
NUM1:	.ASCII /000000     JARVIS: /
NUM2:	.ASCII /000000/
	.EVEN
	172000

.=1000
START:	RESET
	CLR LOSER
	CLR COUNT
	MOV #1,TIMER
	MOV #PDL,P
	MOV #100,LKS
	BR .


LKBRK:	DEC TIMER
	BEQ SWITCH
	MOV #DISLST,DPC
	RTI

SWITCH:	MOV COUNT,A
	MOV LOSER,B
	COM LOSER
	ASL B
	NEG B
	MOV NUMS(B),C
	MOV #6,D
NLOOP:	BICB #7,(C)
	MOV A,E
	BIC #177770,E
	BISB E,(C)
	ASR A
	BIC #100000,A
	ASR A
	ASR A
	DEC C
	DEC D
	BNE NLOOP
	MOV #DISLST,DPC
	MOV #60.,TIMER
	MOV #PDL,P
	CLR COUNT
	CLR PS
	JMP @ROTS(B)

U=E
T=D
TT=F
BYTPL==0
JARVIS:JARVIS1:	INC COUNT
	CLR A
	MOV CHIDX,U
	MOV	PPPHS(U),C
	MOV	PPCC(U),TT
	MOVB	#CIOR,CALU
	ASL	A		;MAKE IT A BYTE OFFSET
	MOV	CTAB(A),T	;POINTS AT FONT DESCRIPTION

GENCH1:	MOV	#LSH,A
	TST	C
	BLT	OVRLAP
EZCASE:	MOV	#BYTPL,U
	MOV	#AC,B
	CLR	(B)+		;CLEAR AC

.REPT 10.
	MOVB	(T)+,(B)	;5.2	;CHARACTER RASTER LINE INTO MQ
	MOV	C,(A)		;3.7	;INITIATE SHIFT
	MOV	(B),(TT)	;5.2	;OUT OF MQ INTO DISPLAY MEMORY
	ADD	U,TT		;2.3	;GET TO NEXT RASTER LINE
;			TOTAL	16.4 MICRO-SECONDS
.ENDR
	ADD #2,CHIDX
	BIC #177760,CHIDX
	JMP JARVIS1

;initial settings same as EZCASE with one exception
;U	<number of bytes per line of display memory>-2

OVRLAP:	MOV	#BYTPL-2,U
	MOV	#MQ+2,B

.REPT 10.
	CLR	-(B)		;3.7	;CLEAR MQ
	CLRB	-(B)		;2.3	;CLEAR HIGH ORDER OF AC
	MOVB	(T)+,-(B)	;5.2	;LOAD AC WITH CHARACTER LINE
	MOV	C,(A)		;3.7	;INIATE SHIFT
	MOV	(B)+,(TT)+	;5.2	;AC TO DISPLAY MEMORY
	MOV	(B)+,(TT)	;5.2	;MQ TO DISPLAY MEMORY
	ADD	U,TT		;2.3	;SET TO NEXT RASTER LINE
;			TOTAL	27.6 MICRO-SECONDS
.ENDR
	ADD #2,CHIDX
	JMP JARVIS1
PPPHS:	0
	0
	1
	1
	1
	1
	1
	1
PPCC:	.REPT 10.
	FOO
	.ENDR
FOO:	.BLKW 10.
AC:	.BLKW 10.
MQ:	.BLKW 10.
LSH:	0
CIOR:CALU:	0
LEBEL:LEBEL1:	INC COUNT
	CLR A
	ASL A
	MOV CTAB(A),A
	MOV LINEAD,DISADR
	MOVB #36.,INCR
	MOV CHIDX,B
	MOV CMASK(B),MASKR
	MOVB SHIFT(B),SHIFTR
	MOV #WINDOW,C
	JMP @CPUT(B)
CPUT:	ONEWRD
	ONEWRD
	TWOWRD
	ONEWRD
	ONEWRD
	TWOWRD
	ONEWRD
	ONEWRD

ONEWRD:	.REPT 10.
	MOVB (A)+,(C)
	.ENDR
	ADD #2,CHIDX
	BIC #177760,CHIDX
	JMP LEBEL1
TWOWRD:	.REPT 10.
	MOVB (A)+,(C)
	.ENDR
	MOV TCMASK(B),MASKR
	MOVB TSHIFT(B),SHIFTR
	ADD #2,LINEAD
	MOV LINEAD,DISADR
	SUB #10.,A
	.REPT 10.
	MOVB (A)+,(C)
	.ENDR
	ADD #2,CHIDX
	JMP LEBEL1
CHIDX:	0
LINEAD:	0
CTAB:	0
INCR:MASKR:SHIFTR:WINDOW:DISADR:	0
TCMASK:CMASK:SHIFT:TSHIFT:	.BLKW 10.





COUNT:	0
LOSER:	0
ROTS:	JARVIS
	LEBEL
NUMS:	NUM1+5
	NUM2+5
TIMER:	69.


	.END START
