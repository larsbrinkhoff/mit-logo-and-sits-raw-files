.MACRO DCS SYM,VAL
SYM===VAL
.ENDM

.INSRT SITS;SITMAC >
.INSRT SITS;SITSS SYMS

FA=	%0
FB=	%1
FC=	%2
FD=	%3
FE=	%4
FF=	%5

R0=	%0
R1=	%1
R2=	%2
R3=	%3
R4=	%4
R5=	%5
SP=	%6
PC=	%7

CRCAP=	0
OWNSPC=	1
TTYCAP=	2
DK0CAP=	10
DK1CAP=	11
DK2CAP=	12
DK3CAP=	13
DKDCAP=	4

.IRP X,<QULK,QUNLK,BYTI,WRDI,FORK,SSTAT>
	.MACRO X ARG
		SAVE ARG
		$'X
	.ENDM
.ENDM
.IRP X,<QULK,QULNK,BYTI,WRDI,FORK>
	.MACRO X'. ARG
		SAVE ARG
		.'X
	.ENDM
.ENDM
.MACRO	BYTO CAP,CHAR
	SAVE CHAR
	SAVE CAP
	$BYTO
.ENDM
.MACRO	WRDO CAP,WORD
	SAVE WORD
	SAVE CAP
	$WRDO
.ENDM
.MACRO	SLEEP T1,T2
	SAVE T1
	SAVE T2
	$SLEEP
.ENDM
.MACRO	INVOKI CAP,FNCTN,ARG1,ARG2
	SAVE <ARG2,ARG1,CAP>
	BIS FNCTN,(P)
	.INVOK
	BNE .+6
	ADD #6,P
.ENDM
.MACRO	INVOK CAP,FNCTN,ARG1,ARG2
	SAVE <ARG2,ARG1,CAP>
	BIS FNCTN,(P)
	$INVOK
.ENDM
.MACRO	INVOK. CAP,FNCTN,ARG1,ARG2
	SAVE <ARG2,ARG1,CAP>
	BIS FNCTN,(P)
	.INVOK
.ENDM
.MACRO	IFERR X
	BNE .+6
	JSR PC,X
.ENDM
.MACRO	CREATE CAP,ARG
	INVOK. #CRCAP,#<CAP*400>,ARG,#-1
.ENDM

.MACRO	MAP CAP,ACC,SRC,DSTPG,SRCPG,POFF,PLEN
	SAVE POFF
	MOVB PLEN,1(P)
	SAVE SRCPG
	SAVE SRC
	MOVB DSTPG,1(P)
	SAVE CAP
	BIS ACC,(P)
	$MAP
.ENDM
.IRP OP,<BLKO,BLKI>
	.MACRO	OP CAP,NUM,BEG
		SAVE BEG
		SAVE NUM
		SAVE CAP
		$'OP
	.ENDM
	.MACRO	OP'. CAP,NUM,BEG
		SAVE BEG
		SAVE NUM
		SAVE CAP
		.'OP
	.ENDM
.ENDM
.MACRO	DISPB TABLE,CHAR,VALUE
	.IF GE CHAR-'A
		.IF LE CHAR-'Z
	.=TABLE+CHAR+40
	.BYTE VALUE
		.ENDC
	.ENDC

	.=TABLE+CHAR
	.BYTE VALUE
.ENDM
